(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8363:function(e,t,a){Promise.resolve().then(a.bind(a,2796))},2796:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var s=a(9533),r=a(1229);function l(){let[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)("rag_openai"),[o,n]=(0,r.useState)([{id:1,role:"assistant",content:"안녕하세요! LangChain + pgvector RAG 데모 챗봇입니다.\n무엇이든 질문해 보세요."}]),[c,d]=(0,r.useState)(!1),i=async s=>{s.preventDefault();let r=e.trim();if(!r||c)return;let l=o.length?o[o.length-1].id+1:1,i={id:l,role:"user",content:r};n(e=>[...e,i]),t(""),d(!0);try{let e,t;if("qlora"===a){if(!(e=await fetch("".concat("http://localhost:8000","/api/chat/qlora"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r,max_new_tokens:512,temperature:.7,top_p:.9})})).ok){let t=await e.json().catch(()=>({}));throw Error(t.detail||t.error||"HTTP ".concat(e.status,": ").concat(e.statusText))}t=await e.json();let a={id:l+1,role:"assistant",content:t.response||"응답을 생성하지 못했습니다."};n(e=>[...e,a])}else{if(!(e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:r,mode:a})})).ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"HTTP ".concat(e.status,": ").concat(e.statusText))}t=await e.json();let s={id:l+1,role:"assistant",content:t.answer||"응답을 생성하지 못했습니다."};n(e=>[...e,s])}}catch(t){let e={id:l+1,role:"assistant",content:"죄송합니다. 응답 생성 중 오류가 발생했습니다. 잠시 후 다시 시도해 주세요."};n(t=>[...t,e])}finally{d(!1)}};return(0,s.jsxs)("main",{className:"min-h-screen bg-slate-950 text-slate-100 flex flex-col",children:[(0,s.jsxs)("header",{className:"border-b border-slate-800 px-4 py-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-semibold tracking-tight",children:"LangChain Chatbot"}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"pgvector RAG + 대화형 모드 PWA 데모"})]}),(0,s.jsx)("span",{className:"text-[10px] rounded-full border border-emerald-500/40 px-2 py-1 text-emerald-300 bg-emerald-500/5",children:"PWA Ready"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>l("rag"),className:"text-xs px-2 py-1 rounded border transition-colors ".concat("rag"===a?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"),children:"RAG만"}),(0,s.jsx)("button",{onClick:()=>l("openai"),className:"text-xs px-2 py-1 rounded border transition-colors ".concat("openai"===a?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"),children:"OpenAI만"}),(0,s.jsx)("button",{onClick:()=>l("rag_openai"),className:"text-xs px-2 py-1 rounded border transition-colors ".concat("rag_openai"===a?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"),children:"RAG + OpenAI"}),(0,s.jsx)("button",{onClick:()=>l("rag_local"),className:"text-xs px-2 py-1 rounded border transition-colors ".concat("rag_local"===a?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"),children:"RAG + 로컬 LLM"}),(0,s.jsx)("button",{onClick:()=>l("local"),className:"text-xs px-2 py-1 rounded border transition-colors ".concat("local"===a?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"),children:"로컬 LLM만"}),(0,s.jsx)("button",{onClick:()=>l("qlora"),className:"text-xs px-2 py-1 rounded border transition-colors ".concat("qlora"===a?"bg-purple-700 border-purple-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-purple-600"),children:"QLoRA"})]})]}),(0,s.jsxs)("section",{className:"flex-1 px-4 py-3 flex flex-col gap-3 max-w-3xl w-full mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 overflow-y-auto flex-1 rounded-lg border border-slate-800 bg-slate-900/40 p-3",children:[o.map(e=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] whitespace-pre-wrap rounded-2xl px-3 py-2 text-sm leading-relaxed ".concat("user"===e.role?"bg-emerald-500 text-slate-950":"bg-slate-800 text-slate-50"),children:e.content})},e.id)),c&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"rounded-2xl px-3 py-2 text-sm bg-slate-800 text-slate-300 animate-pulse",children:"생각 중입니다..."})})]}),(0,s.jsxs)("form",{onSubmit:i,className:"mt-2 flex gap-2",children:[(0,s.jsx)("input",{type:"text",className:"flex-1 rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-500/60 focus:border-emerald-500",placeholder:"질문을 입력하세요. (예: LangChain과 pgvector로 RAG 시스템을 어떻게 만들 수 있어?)",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)("button",{type:"submit",disabled:c||!e.trim(),className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 disabled:opacity-60 disabled:cursor-not-allowed hover:bg-emerald-400 transition-colors",children:c?"전송 중...":"전송"})]})]})]})}}},function(e){e.O(0,[170,842,744],function(){return e(e.s=8363)}),_N_E=e.O()}]);