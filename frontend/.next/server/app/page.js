(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1182:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(8800),s(394),s(5133);var r=s(9193),a=s(1854),o=s(3997),l=s.n(o),n=s(3320),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(t,i);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8800)),"C:\\Users\\hi\\Desktop\\test3\\rag\\frontend\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,394)),"C:\\Users\\hi\\Desktop\\test3\\rag\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5133,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\hi\\Desktop\\test3\\rag\\frontend\\app\\page.tsx"],x="/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6422:()=>{},8778:(e,t,s)=>{Promise.resolve().then(s.bind(s,9178))},1168:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9388,23)),Promise.resolve().then(s.t.bind(s,1152,23)),Promise.resolve().then(s.t.bind(s,2764,23)),Promise.resolve().then(s.t.bind(s,6894,23)),Promise.resolve().then(s.t.bind(s,3299,23)),Promise.resolve().then(s.t.bind(s,184,23))},9178:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(7486),a=s(618);function o(){let[e,t]=(0,a.useState)(""),[s,o]=(0,a.useState)("rag_openai"),[l,n]=(0,a.useState)([{id:1,role:"assistant",content:"안녕하세요! LangChain + pgvector RAG 데모 챗봇입니다.\n무엇이든 질문해 보세요."}]),[i,d]=(0,a.useState)(!1),c=async r=>{r.preventDefault();let a=e.trim();if(!a||i)return;let o=l.length?l[l.length-1].id+1:1,c={id:o,role:"user",content:a};n(e=>[...e,c]),t(""),d(!0);try{let e,t;if("qlora"===s){if(!(e=await fetch("http://localhost:8000/api/chat/qlora",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a,max_new_tokens:512,temperature:.7,top_p:.9})})).ok){let t=await e.json().catch(()=>({}));throw Error(t.detail||t.error||`HTTP ${e.status}: ${e.statusText}`)}t=await e.json();let s={id:o+1,role:"assistant",content:t.response||"응답을 생성하지 못했습니다."};n(e=>[...e,s])}else{if(!(e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:a,mode:s})})).ok){let t=await e.json().catch(()=>({}));throw Error(t.error||`HTTP ${e.status}: ${e.statusText}`)}t=await e.json();let r={id:o+1,role:"assistant",content:t.answer||"응답을 생성하지 못했습니다."};n(e=>[...e,r])}}catch(t){let e={id:o+1,role:"assistant",content:"죄송합니다. 응답 생성 중 오류가 발생했습니다. 잠시 후 다시 시도해 주세요."};n(t=>[...t,e])}finally{d(!1)}};return(0,r.jsxs)("main",{className:"min-h-screen bg-slate-950 text-slate-100 flex flex-col",children:[(0,r.jsxs)("header",{className:"border-b border-slate-800 px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"LangChain Chatbot"}),r.jsx("p",{className:"text-xs text-slate-400",children:"pgvector RAG + 대화형 모드 PWA 데모"})]}),r.jsx("span",{className:"text-[10px] rounded-full border border-emerald-500/40 px-2 py-1 text-emerald-300 bg-emerald-500/5",children:"PWA Ready"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>o("rag"),className:`text-xs px-2 py-1 rounded border transition-colors ${"rag"===s?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"RAG만"}),r.jsx("button",{onClick:()=>o("openai"),className:`text-xs px-2 py-1 rounded border transition-colors ${"openai"===s?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"OpenAI만"}),r.jsx("button",{onClick:()=>o("rag_openai"),className:`text-xs px-2 py-1 rounded border transition-colors ${"rag_openai"===s?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"RAG + OpenAI"}),r.jsx("button",{onClick:()=>o("rag_local"),className:`text-xs px-2 py-1 rounded border transition-colors ${"rag_local"===s?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"RAG + 로컬 LLM"}),r.jsx("button",{onClick:()=>o("local"),className:`text-xs px-2 py-1 rounded border transition-colors ${"local"===s?"bg-slate-700 border-slate-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:"로컬 LLM만"}),r.jsx("button",{onClick:()=>o("qlora"),className:`text-xs px-2 py-1 rounded border transition-colors ${"qlora"===s?"bg-purple-700 border-purple-600 text-slate-100":"bg-slate-900 border-slate-700 text-slate-400 hover:border-purple-600"}`,children:"QLoRA"})]})]}),(0,r.jsxs)("section",{className:"flex-1 px-4 py-3 flex flex-col gap-3 max-w-3xl w-full mx-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 overflow-y-auto flex-1 rounded-lg border border-slate-800 bg-slate-900/40 p-3",children:[l.map(e=>r.jsx("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-[80%] whitespace-pre-wrap rounded-2xl px-3 py-2 text-sm leading-relaxed ${"user"===e.role?"bg-emerald-500 text-slate-950":"bg-slate-800 text-slate-50"}`,children:e.content})},e.id)),i&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"rounded-2xl px-3 py-2 text-sm bg-slate-800 text-slate-300 animate-pulse",children:"생각 중입니다..."})})]}),(0,r.jsxs)("form",{onSubmit:c,className:"mt-2 flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-500/60 focus:border-emerald-500",placeholder:"질문을 입력하세요. (예: LangChain과 pgvector로 RAG 시스템을 어떻게 만들 수 있어?)",value:e,onChange:e=>t(e.target.value)}),r.jsx("button",{type:"submit",disabled:i||!e.trim(),className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-medium text-slate-950 disabled:opacity-60 disabled:cursor-not-allowed hover:bg-emerald-400 transition-colors",children:i?"전송 중...":"전송"})]})]})]})}},394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>a});var r=s(9703);s(3121);let a={title:"LangChain Chatbot",description:"LangChain + pgvector 기반 RAG Chatbot PWA 데모",manifest:"/manifest.webmanifest",themeColor:"#020817"};function o({children:e}){return(0,r.jsxs)("html",{lang:"ko",children:[r.jsx("head",{children:r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})}),r.jsx("body",{children:e})]})}},8800:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>o,default:()=>n});var r=s(2334);let a=(0,r.createProxy)(String.raw`C:\Users\hi\Desktop\test3\rag\frontend\app\page.tsx`),{__esModule:o,$$typeof:l}=a;a.default;let n=(0,r.createProxy)(String.raw`C:\Users\hi\Desktop\test3\rag\frontend\app\page.tsx#default`)},3121:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[357,491],()=>s(1182));module.exports=r})();